# MY_FIT Recipe Data Processor

### ** Repository Link **
https://github.com/Himanshu212005/My_Fit

## 1. Overview

This project is a suite of Node.js scripts designed to process, clean, and manage recipe data for the MY_FIT application. Its primary function is to take a raw JSON data file of recipes (`full_recipe_data.json`) and a directory of unsorted images, and systematically link each recipe to its correct image.

The workflow involves:
1.  Automatically guessing image-to-recipe mappings.
2.  Providing a file for manual verification and correction of these mappings.
3.  Standardizing image filenames and organizing them into a structured directory.
4.  Updating the main recipe data file with the new, correct image paths.
5.  Verifying the integrity of the final data.

This is a crucial data pre-processing step to ensure the main application has consistent and valid data to work with.

## 2. Project Structure

```
MY_FIT/
├── Recipe/
│   └── image_for_cuisines/   # Source images for all recipes
│       ├── image1.jpg
│       └── image2.png
├── images/
│   └── recipes/              # Target directory for processed images
│       ├── breakfast/
│       ├── lunch/
│       └── dinner/
├── full_recipe_data.json     # The main database of recipes
├── image_mapping.json        # Intermediate file for mapping images to recipes
├── create_image_map.js       # Script to generate the initial image_mapping.json
├── fix_recipe_paths.js       # Script to rename, move, and update image paths
└── verify_recipe_images.js   # Script to verify final image paths
```

### Key Files & Directories

*   **`full_recipe_data.json`**: The main JSON file containing all recipe data, structured by meal type (`breakfast`, `lunch`, `dinner`). Each recipe object has an `id`, `name`, and an `image` path property that will be updated by these scripts.
*   **`Recipe/image_for_cuisines/`**: This directory is the source for all recipe images. The filenames are not assumed to be standardized.
*   **`images/recipes/`**: This is the target directory where the scripts will place the renamed and organized images.
*   **`image_mapping.json`**: An intermediate file generated by `create_image_map.js`. It helps in mapping recipes to their source images. **You will need to manually verify and complete this file.**
*   **`create_image_map.js`**: A script that attempts to automatically match recipes with images based on their names and generates the `image_mapping.json` file.
*   **`fix_recipe_paths.js`**: A script that reads the completed `image_mapping.json`, renames and moves the images to the target directory, and updates `full_recipe_data.json` with the new, standardized image paths.
*   **`verify_recipe_images.js`**: A utility script to check if all image paths in the updated `full_recipe_data.json` point to existing files.

## 3. Prerequisites

*   Node.js (v14.x or later is recommended)
*   `npm` (which comes with Node.js)

## 4. Setup

1.  Clone or download the project files into a local directory.
2.  Open a terminal or command prompt and navigate to the project's root directory.
3.  Install the required dependencies (if any are added in the future). The current scripts only use built-in Node.js modules, but it's good practice to run install.
    ```bash
    npm install
    ```

## 5. Execution Workflow (User Manual)

The process is designed to be run in a specific order. Follow these steps carefully to ensure the data is processed correctly.

### Step 1: Generate the Initial Image Map

First, run the `create_image_map.js` script. This script reads all recipes from `full_recipe_data.json` and all image filenames from `Recipe/image_for_cuisines/`. It then creates `image_mapping.json` with its best guess for which image belongs to which recipe.

```bash
node create_image_map.js
```

After running, the script will report how many images it successfully guessed and how many require manual mapping.

### Step 2: Manually Verify and Complete the Image Map

This is the most critical manual step. Open the newly created `image_mapping.json` file in a code editor. It will contain a list of all recipes.

```json
[
    {
        "id": 30,
        "name": "Vegetable Rava Upma Recipe  - Sooji Upma Recipe",
        "sourceImage": "3842.rava-pongal.jpg"
    },
    {
        "id": 33,
        "name": "Rajma and Horse Gram Stuffed Paratha Recipe",
        "sourceImage": ""
    }
]
```

Your task is to:
1.  **Verify** the filenames for entries where `sourceImage` is not empty. The script's guess might be incorrect.
2.  **Fill in** the correct filename from the `Recipe/image_for_cuisines/` directory for any entries where `sourceImage` is an empty string (`""`).

**Ensure every recipe has the correct `sourceImage` value before proceeding.**

### Step 3: Finalize Image Paths and Organization

Once `image_mapping.json` is complete and accurate, run the `fix_recipe_paths.js` script. This script performs the final processing:

*   It reads your corrected `image_mapping.json`.
*   It renames the source images to a standardized kebab-case format (e.g., `vegetable-rava-upma-recipe_30.jpg`).
*   It moves the renamed images into the appropriate sub-directory within `images/recipes/` (e.g., `images/recipes/breakfast/`).
*   It updates the `image` property for each recipe in `full_recipe_data.json` to the new, correct path.

```bash
node fix_recipe_paths.js
```

### **Step 4: Verify the Final Data**

Finally, run the `verify_recipe_images.js` script to confirm that all image paths in the updated `full_recipe_data.json` are correct and point to an existing file.

```bash
node verify_recipe_images.js
```


If there are any missing images, the script will list them. You may need to revisit the previous steps to correct any errors. If all is well, you'll get a success message, and your `full_recipe_data.json` is now clean and ready for use in the application.





